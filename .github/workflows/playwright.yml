name: Playwright Tests

on:
  workflow_dispatch:
    inputs:
      environment:
        description: "Select environment"
        required: false
        default: QAT
        type: choice
        options:
          - DEV
          - QAT
          - UAT

jobs:
  dev:
    if: ${{ github.event.inputs.environment == 'DEV' }}
    runs-on: ubuntu-latest
    environment: DEV   # literal string, required for secrets
    env:
      TEST_ENV: DEV
    steps:
      - uses: actions/checkout@v4
      - run: npm ci
      - run: npx playwright test

  qat:
    if: ${{ github.event.inputs.environment == 'QAT' || github.event.inputs.environment == '' }}
    runs-on: ubuntu-latest
    environment: QAT
    env:
      TEST_ENV: QAT
    steps:
      - uses: actions/checkout@v4
      - run: npm ci
      - run: npx playwright test

  uat:
    if: ${{ github.event.inputs.environment == 'UAT' }}
    runs-on: ubuntu-latest
    environment: UAT
    env:
      TEST_ENV: UAT
    steps:
      - uses: actions/checkout@v4
      - run: npm ci
      - run: npx playwright test
